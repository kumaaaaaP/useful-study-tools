<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>鉄壁単語リスト</title>
    <link rel="stylesheet" href="../style.css">
    <style>
        :root {
            --primary-color: #007bff;
            --text-main: #333;
            --text-sub: #666;
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
        }

        body {
            font-family: 'Helvetica Neue', Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 10px;
            color: var(--text-main);
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        /* 検索ボックス固定 */
        .search-container {
            position: sticky;
            top: 0;
            background-color: var(--bg-color);
            padding: 10px 0;
            z-index: 1000;
        }

        .search-box {
            width: 100%;
            padding: 12px 15px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 25px;
            box-sizing: border-box;
            outline: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: border-color 0.3s;
        }

        .search-box:focus {
            border-color: var(--primary-color);
        }

        /* リストアイテムのレイアウト */
        .word-item {
            display: flex;
            align-items: center;
            background: var(--card-bg);
            margin-bottom: 8px;
            padding: 12px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        /* 左側：数字 */
        .word-number {
            width: 50px;
            font-family: 'Courier New', Courier, monospace;
            font-weight: bold;
            color: var(--text-sub);
            font-size: 0.9rem;
            border-right: 1px solid #eee;
            margin-right: 15px;
            flex-shrink: 0;
        }

        /* 右側：単語ブロック */
        .word-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column; /* 上下に配置 */
        }

        /* 右上：英単語 */
        .word-english {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 4px;
        }

        /* 右下：日本語訳 */
        .word-japanese {
            font-size: 0.95rem;
            color: var(--text-main);
            line-height: 1.4;
        }

        .no-result {
            text-align: center;
            padding: 50px;
            color: #999;
        }
    </style>
</head>
<body>
    <nav>
        <ul>
            <li><a href="index.html">英語トップへ戻る</a></li>
            <li><a href="../index.html">ホームへ戻る</a></li>
        </ul>
    </nav>
    <main>

    <h1>鉄壁 単語リスト</h1>
    
    <div class="search-container">
        <input type="text" id="searchInput" class="search-box" placeholder="検索（英単語・日本語）...">
    </div>

    <div id="wordList">
        </div>
    
    <div id="noResult" class="no-result" style="display: none;">該当する単語がありません</div>

</main>

<script src="teppeki-script.js"></script>
    
<script>
    const wordList = document.getElementById('wordList');
    const searchInput = document.getElementById('searchInput');
    const noResult = document.getElementById('noResult');

    /**
     * リストを描画する関数
     */
    function renderList(items) {
        wordList.innerHTML = '';
        
        if (items.length === 0) {
            noResult.style.display = 'block';
            return;
        }
        noResult.style.display = 'none';

        const fragment = document.createDocumentFragment();

        items.forEach(item => {
            // 親コンテナ
            const div = document.createElement('div');
            div.className = 'word-item';

            // 左側：数字
            const numEl = document.createElement('div');
            numEl.className = 'word-number';
            numEl.textContent = String(item.originalIndex + 1).padStart(3, '0');

            // 右側：コンテンツブロック
            const contentEl = document.createElement('div');
            contentEl.className = 'word-content';

            // 右上：英単語
            const engEl = document.createElement('div');
            engEl.className = 'word-english';
            engEl.textContent = item.english;

            // 右下：日本語訳
            const jpEl = document.createElement('div');
            jpEl.className = 'word-japanese';
            jpEl.textContent = item.japanese;

            contentEl.appendChild(engEl);
            contentEl.appendChild(jpEl);
            
            div.appendChild(numEl);
            div.appendChild(contentEl);
            
            fragment.appendChild(div);
        });

        wordList.appendChild(fragment);
    }

    function handleSearch() {
        const query = searchInput.value.toLowerCase().trim();
        
        // 全体通し番号を保持するために originalIndex を付与してフィルタ
        const filtered = allWords
            .map((word, index) => ({ ...word, originalIndex: index }))
            .filter(word => {
                return word.english.toLowerCase().includes(query) || 
                       word.japanese.includes(query);
            });

        renderList(filtered);
    }

    // 初期化
    window.addEventListener('DOMContentLoaded', () => {
        if (typeof allWords !== 'undefined') {
            handleSearch();
        } else {
            wordList.innerHTML = '<div class="no-result">teppeki.jsが見つかりません</div>';
        }
    });

    searchInput.addEventListener('input', handleSearch);
</script>

</body>
</html>
